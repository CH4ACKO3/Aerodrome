{"expires":1743603349.586,"value":{"highlighted":"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style=\"color: #C792EA;\">virtual</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #FFCB6B;\">py</span><span style=\"color: #89DDFF;\">::</span><span style=\"color: #FFCB6B;\">object</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">step</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #FFCB6B;\">py</span><span style=\"color: #89DDFF;\">::</span><span style=\"color: #FFCB6B;\">dict</span><span style=\"color: #A6ACCD;\"> action</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> override</span><span style=\"color: #676E95;\"> // `virtual` 表示该函数可以被重写，`override` 表示重写父类中的同名函数</span></div><div class='line'><span style=\"color: #89DDFF;\">{</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #C792EA;\">double</span><span style=\"color: #A6ACCD;\"> dt </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> action</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">dt</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">].</span><span style=\"color: #A6ACCD;\">cast</span><span style=\"color: #89DDFF;\">&lt;</span><span style=\"color: #C792EA;\">double</span><span style=\"color: #89DDFF;\">&gt;();</span><span style=\"color: #676E95;\"> // 从动作字典中读取积分步长</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #A6ACCD;\">    L </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> action</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">L</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">].</span><span style=\"color: #A6ACCD;\">cast</span><span style=\"color: #89DDFF;\">&lt;</span><span style=\"color: #C792EA;\">double</span><span style=\"color: #89DDFF;\">&gt;();</span><span style=\"color: #676E95;\"> // 从动作字典中读取飞行器所受外力</span></div><div class='line'><span style=\"color: #A6ACCD;\">    D </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> action</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">D</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">].</span><span style=\"color: #A6ACCD;\">cast</span><span style=\"color: #89DDFF;\">&lt;</span><span style=\"color: #C792EA;\">double</span><span style=\"color: #89DDFF;\">&gt;();</span></div><div class='line'><span style=\"color: #A6ACCD;\">    N </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> action</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">N</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">].</span><span style=\"color: #A6ACCD;\">cast</span><span style=\"color: #89DDFF;\">&lt;</span><span style=\"color: #C792EA;\">double</span><span style=\"color: #89DDFF;\">&gt;();</span></div><div class='line'><span style=\"color: #A6ACCD;\">    T </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> action</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">T</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">].</span><span style=\"color: #A6ACCD;\">cast</span><span style=\"color: #89DDFF;\">&lt;</span><span style=\"color: #C792EA;\">double</span><span style=\"color: #89DDFF;\">&gt;();</span></div><div class='line'><span style=\"color: #A6ACCD;\">    M </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> action</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">M</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">].</span><span style=\"color: #A6ACCD;\">cast</span><span style=\"color: #89DDFF;\">&lt;</span><span style=\"color: #FFCB6B;\">std</span><span style=\"color: #89DDFF;\">::</span><span style=\"color: #A6ACCD;\">array</span><span style=\"color: #89DDFF;\">&lt;</span><span style=\"color: #C792EA;\">double</span><span style=\"color: #89DDFF;\">,</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #F78C6C;\">3</span><span style=\"color: #89DDFF;\">&gt;&gt;();</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #676E95;\">    // 使用不同的积分方法更新飞行器状态</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">if</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">integrator </span><span style=\"color: #89DDFF;\">==</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">euler</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">)</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">{</span></div><div class='line'><span style=\"color: #676E95;\">        // 这里可以直接运算是因为在 Object3D 类中重载了四则运算</span></div><div class='line'><span style=\"color: #676E95;\">        // this-&gt;d() 调用求导方法，返回动力学导数（即，返回的实例的每个属性是传入的实例对应属性的导数）</span></div><div class='line'><span style=\"color: #676E95;\">        // this-&gt;d() * dt 即表示增量</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">this-&gt;</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">()</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">;</span></div><div class='line'><span style=\"color: #F07178;\">    </span><span style=\"color: #89DDFF;\">}</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">else</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">if</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">integrator </span><span style=\"color: #89DDFF;\">==</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">midpoint</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">)</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">{</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> temp1 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">this-&gt;</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">()</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F78C6C;\">0.5</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k1 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #A6ACCD;\">temp1</span><span style=\"color: #89DDFF;\">.</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k1 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">;</span></div><div class='line'><span style=\"color: #F07178;\">    </span><span style=\"color: #89DDFF;\">}</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">else</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">if</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">integrator </span><span style=\"color: #89DDFF;\">==</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">rk23</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">)</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">{</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k1 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">this-&gt;</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> temp1 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k1 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F78C6C;\">0.5</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k2 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #A6ACCD;\">temp1</span><span style=\"color: #89DDFF;\">.</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> temp2 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k2 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F78C6C;\">0.5</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k3 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #A6ACCD;\">temp2</span><span style=\"color: #89DDFF;\">.</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F07178;\">k1 </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k2 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #F78C6C;\">2</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k3</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F07178;\">dt </span><span style=\"color: #89DDFF;\">/</span><span style=\"color: #F07178;\"> </span><span style=\"color: #F78C6C;\">4</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #F07178;\">    </span><span style=\"color: #89DDFF;\">}</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">else</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">if</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">integrator </span><span style=\"color: #89DDFF;\">==</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #C3E88D;\">rk45</span><span style=\"color: #89DDFF;\">&quot;</span><span style=\"color: #89DDFF;\">)</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">{</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k1 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">this-&gt;</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> temp1 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k1 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F78C6C;\">0.5</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k2 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #A6ACCD;\">temp1</span><span style=\"color: #89DDFF;\">.</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> temp2 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k2 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F78C6C;\">0.5</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k3 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #A6ACCD;\">temp2</span><span style=\"color: #89DDFF;\">.</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> temp3 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k3 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> dt</span><span style=\"color: #89DDFF;\">;</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #C792EA;\">auto</span><span style=\"color: #F07178;\"> k4 </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #A6ACCD;\">temp3</span><span style=\"color: #89DDFF;\">.</span><span style=\"color: #82AAFF;\">d</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #F07178;\">        </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*this</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F07178;\">k1 </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k2 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #F78C6C;\">2</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k3 </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #F78C6C;\">2</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #F07178;\"> k4</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #F07178;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #F07178;\">dt </span><span style=\"color: #89DDFF;\">/</span><span style=\"color: #F07178;\"> </span><span style=\"color: #F78C6C;\">6</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #F07178;\">    </span><span style=\"color: #89DDFF;\">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #676E95;\">    // 由于在上面的动力学积分中只计算了必要的量</span></div><div class='line'><span style=\"color: #676E95;\">    // 此处还需要对未更新的属性进行计算</span></div><div class='line'><span style=\"color: #A6ACCD;\">    beta </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">phi </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> phi_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">phi </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> phi_v</span><span style=\"color: #89DDFF;\">))</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    alpha </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">phi </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> phi_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">phi </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> phi_v</span><span style=\"color: #89DDFF;\">))</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">))</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">/</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">beta</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    gamma_v </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">alpha</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">beta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">alpha</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">beta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">+</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">beta</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">gamma</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta</span><span style=\"color: #89DDFF;\">))</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">/</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #A6ACCD;\">    vel</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #F78C6C;\">0</span><span style=\"color: #89DDFF;\">]</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> V </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">phi_v</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    vel</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #F78C6C;\">1</span><span style=\"color: #89DDFF;\">]</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> V </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    vel</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #F78C6C;\">2</span><span style=\"color: #89DDFF;\">]</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">-</span><span style=\"color: #A6ACCD;\">V </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">cos</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">theta_v</span><span style=\"color: #89DDFF;\">)</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">sin</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">phi_v</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    h </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> pos</span><span style=\"color: #89DDFF;\">[</span><span style=\"color: #F78C6C;\">1</span><span style=\"color: #89DDFF;\">];</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #A6ACCD;\">    Tem </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">Temperature</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">h</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    Pres </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">Pressure</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">h</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    Rho </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">Density</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">Tem</span><span style=\"color: #89DDFF;\">,</span><span style=\"color: #A6ACCD;\"> Pres</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    a </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">SpeedofSound</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">Tem</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'><span style=\"color: #A6ACCD;\">    g </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">Gravity</span><span style=\"color: #89DDFF;\">(</span><span style=\"color: #A6ACCD;\">h</span><span style=\"color: #89DDFF;\">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #A6ACCD;\">    q </span><span style=\"color: #89DDFF;\">=</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #F78C6C;\">0.5</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> Rho </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> V </span><span style=\"color: #89DDFF;\">*</span><span style=\"color: #A6ACCD;\"> V</span><span style=\"color: #89DDFF;\">;</span></div><div class='line'><span style=\"color: #A6ACCD;\">    </span><span style=\"color: #89DDFF;\">return</span><span style=\"color: #A6ACCD;\"> </span><span style=\"color: #82AAFF;\">to_dict</span><span style=\"color: #89DDFF;\">();</span></div><div class='line'><span style=\"color: #89DDFF;\">}</span></div>","classes":"torchlight","styles":"background-color: #292D3E; --theme-selection-background: #00000080;"}}
