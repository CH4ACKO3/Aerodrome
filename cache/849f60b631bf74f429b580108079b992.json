{"expires":1743605057.934,"value":{"highlighted":"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 1</span><span style=\"color: #0991B6;\">virtual</span><span style=\"color: #002339;\"> py::</span><span style=\"color: #0444AC;\">object</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">step</span><span style=\"color: #002339;\">(py::</span><span style=\"color: #0444AC;\">dict</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">action</span><span style=\"color: #002339;\">) override</span><span style=\"color: #357B42;\"> // `virtual` 表示该函数可以被重写，`override` 表示重写父类中的同名函数</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 2</span><span style=\"color: #002339;\">{</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 3</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">double</span><span style=\"color: #002339;\"> dt </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">action</span><span style=\"color: #002339;\">[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">dt</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">].</span><span style=\"color: #7FDBCA;\">cast</span><span style=\"color: #7B30D0;\">&lt;</span><span style=\"color: #0991B6;\">double</span><span style=\"color: #7B30D0;\">&gt;</span><span style=\"color: #002339;\">();</span><span style=\"color: #357B42;\"> // 从动作字典中读取积分步长</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 4</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 5</span><span style=\"color: #002339;\">    L </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">action</span><span style=\"color: #002339;\">[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">L</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">].</span><span style=\"color: #7FDBCA;\">cast</span><span style=\"color: #7B30D0;\">&lt;</span><span style=\"color: #0991B6;\">double</span><span style=\"color: #7B30D0;\">&gt;</span><span style=\"color: #002339;\">();</span><span style=\"color: #357B42;\"> // 从动作字典中读取飞行器所受外力</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 6</span><span style=\"color: #002339;\">    D </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">action</span><span style=\"color: #002339;\">[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">D</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">].</span><span style=\"color: #7FDBCA;\">cast</span><span style=\"color: #7B30D0;\">&lt;</span><span style=\"color: #0991B6;\">double</span><span style=\"color: #7B30D0;\">&gt;</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 7</span><span style=\"color: #002339;\">    N </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">action</span><span style=\"color: #002339;\">[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">N</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">].</span><span style=\"color: #7FDBCA;\">cast</span><span style=\"color: #7B30D0;\">&lt;</span><span style=\"color: #0991B6;\">double</span><span style=\"color: #7B30D0;\">&gt;</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 8</span><span style=\"color: #002339;\">    T </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">action</span><span style=\"color: #002339;\">[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">T</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">].</span><span style=\"color: #7FDBCA;\">cast</span><span style=\"color: #7B30D0;\">&lt;</span><span style=\"color: #0991B6;\">double</span><span style=\"color: #7B30D0;\">&gt;</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 9</span><span style=\"color: #002339;\">    M </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">action</span><span style=\"color: #002339;\">[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">M</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">].</span><span style=\"color: #7FDBCA;\">cast</span><span style=\"color: #7B30D0;\">&lt;</span><span style=\"color: #002339;\">std::array</span><span style=\"color: #7B30D0;\">&lt;</span><span style=\"color: #0991B6;\">double</span><span style=\"color: #002339;\">, </span><span style=\"color: #174781;\">3</span><span style=\"color: #7B30D0;\">&gt;&gt;</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">10</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">11</span><span style=\"color: #357B42;\">    // 使用不同的积分方法更新飞行器状态</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">12</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">13</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">if</span><span style=\"color: #002339;\"> (integrator </span><span style=\"color: #7B30D0;\">==</span><span style=\"color: #002339;\"> </span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">euler</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">14</span><span style=\"color: #002339;\">    {</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">15</span><span style=\"color: #357B42;\">        // 这里可以直接运算是因为在 Object3D 类中重载了四则运算</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">16</span><span style=\"color: #357B42;\">        // this-&gt;d() 调用求导方法，返回动力学导数（即，返回的实例的每个属性是传入的实例对应属性的导数）</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">17</span><span style=\"color: #357B42;\">        // this-&gt;d() * dt 即表示增量</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">18</span><span style=\"color: #002339;\">        </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> </span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\">-&gt;</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">() </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt;</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">19</span><span style=\"color: #002339;\">    }</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">20</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">else</span><span style=\"color: #002339;\"> </span><span style=\"color: #0991B6;\">if</span><span style=\"color: #002339;\"> (integrator </span><span style=\"color: #7B30D0;\">==</span><span style=\"color: #002339;\"> </span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">midpoint</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">21</span><span style=\"color: #002339;\">    {</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">22</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> temp1 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> </span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\">-&gt;</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">() </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (</span><span style=\"color: #174781;\">0.5</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">23</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k1 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">temp1</span><span style=\"color: #002339;\">.</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">24</span><span style=\"color: #002339;\">        </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k1 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt;</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">25</span><span style=\"color: #002339;\">    }</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">26</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">else</span><span style=\"color: #002339;\"> </span><span style=\"color: #0991B6;\">if</span><span style=\"color: #002339;\"> (integrator </span><span style=\"color: #7B30D0;\">==</span><span style=\"color: #002339;\"> </span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">rk23</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">27</span><span style=\"color: #002339;\">    {</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">28</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k1 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\">-&gt;</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">29</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> temp1 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k1 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (</span><span style=\"color: #174781;\">0.5</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">30</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k2 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">temp1</span><span style=\"color: #002339;\">.</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">31</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> temp2 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k2 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (</span><span style=\"color: #174781;\">0.5</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">32</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k3 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">temp2</span><span style=\"color: #002339;\">.</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">33</span><span style=\"color: #002339;\">        </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> (k1 </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k2 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">2</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k3) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (dt </span><span style=\"color: #7B30D0;\">/</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">4</span><span style=\"color: #002339;\">);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">34</span><span style=\"color: #002339;\">    }</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">35</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">else</span><span style=\"color: #002339;\"> </span><span style=\"color: #0991B6;\">if</span><span style=\"color: #002339;\"> (integrator </span><span style=\"color: #7B30D0;\">==</span><span style=\"color: #002339;\"> </span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">rk45</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">36</span><span style=\"color: #002339;\">    {</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">37</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k1 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\">-&gt;</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">38</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> temp1 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k1 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (</span><span style=\"color: #174781;\">0.5</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">39</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k2 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">temp1</span><span style=\"color: #002339;\">.</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">40</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> temp2 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k2 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (</span><span style=\"color: #174781;\">0.5</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">41</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k3 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">temp2</span><span style=\"color: #002339;\">.</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">42</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> temp3 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k3 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> dt;</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">43</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">auto</span><span style=\"color: #002339;\"> k4 </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">temp3</span><span style=\"color: #002339;\">.</span><span style=\"color: #B1108E;\">d</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">44</span><span style=\"color: #002339;\">        </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #0991B6;\">this</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> (k1 </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k2 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">2</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k3 </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">2</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> k4) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (dt </span><span style=\"color: #7B30D0;\">/</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">6</span><span style=\"color: #002339;\">);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">45</span><span style=\"color: #002339;\">    }</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">46</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">47</span><span style=\"color: #357B42;\">    // 由于在上面的动力学积分中只计算了必要的量</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">48</span><span style=\"color: #357B42;\">    // 此处还需要对未更新的属性进行计算</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">49</span><span style=\"color: #002339;\">    beta </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta_v) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (</span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(gamma) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(phi </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> phi_v) </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(theta) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(gamma) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(phi </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> phi_v)) </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(theta_v) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(gamma);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">50</span><span style=\"color: #002339;\">    alpha </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> (</span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta_v) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> (</span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(theta) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(gamma) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(phi </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> phi_v) </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(gamma) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(phi </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> phi_v)) </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(theta_v) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(gamma)) </span><span style=\"color: #7B30D0;\">/</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(beta);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">51</span><span style=\"color: #002339;\">    gamma_v </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> (</span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(alpha) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(beta) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(theta) </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(alpha) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(beta) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(gamma) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta) </span><span style=\"color: #7B30D0;\">+</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(beta) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(gamma) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta)) </span><span style=\"color: #7B30D0;\">/</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta_v);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">52</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">53</span><span style=\"color: #002339;\">    </span><span style=\"color: #2F86D2;\">vel</span><span style=\"color: #002339;\">[</span><span style=\"color: #174781;\">0</span><span style=\"color: #002339;\">] </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> V </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta_v) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(phi_v);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">54</span><span style=\"color: #002339;\">    </span><span style=\"color: #2F86D2;\">vel</span><span style=\"color: #002339;\">[</span><span style=\"color: #174781;\">1</span><span style=\"color: #002339;\">] </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> V </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(theta_v);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">55</span><span style=\"color: #002339;\">    </span><span style=\"color: #2F86D2;\">vel</span><span style=\"color: #002339;\">[</span><span style=\"color: #174781;\">2</span><span style=\"color: #002339;\">] </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">-</span><span style=\"color: #002339;\">V </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">cos</span><span style=\"color: #002339;\">(theta_v) </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">sin</span><span style=\"color: #002339;\">(phi_v);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">56</span><span style=\"color: #002339;\">    h </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">pos</span><span style=\"color: #002339;\">[</span><span style=\"color: #174781;\">1</span><span style=\"color: #002339;\">];</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">57</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">58</span><span style=\"color: #002339;\">    Tem </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">Temperature</span><span style=\"color: #002339;\">(h);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">59</span><span style=\"color: #002339;\">    Pres </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">Pressure</span><span style=\"color: #002339;\">(h);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">60</span><span style=\"color: #002339;\">    Rho </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">Density</span><span style=\"color: #002339;\">(Tem, Pres);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">61</span><span style=\"color: #002339;\">    a </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">SpeedofSound</span><span style=\"color: #002339;\">(Tem);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">62</span><span style=\"color: #002339;\">    g </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">Gravity</span><span style=\"color: #002339;\">(h);</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">63</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">64</span><span style=\"color: #002339;\">    q </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">0.5</span><span style=\"color: #002339;\"> </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> Rho </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> V </span><span style=\"color: #7B30D0;\">*</span><span style=\"color: #002339;\"> V;</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">65</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">return</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">to_dict</span><span style=\"color: #002339;\">();</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">66</span><span style=\"color: #002339;\">}</span></div>","classes":"torchlight","styles":"background-color: #FFFFFF; --theme-selection-background: #4373c2;"}}
