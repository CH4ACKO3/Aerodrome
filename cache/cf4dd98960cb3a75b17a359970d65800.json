{"expires":1743605056.829,"value":{"highlighted":"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 1</span><span style=\"color: #0991B6;\">class</span><span style=\"color: #002339;\"> </span><span style=\"color: #0444AC;\">Minimal</span><span style=\"color: #002339;\">(</span><span style=\"color: #B02767;\">Env</span><span style=\"color: #002339;\">):</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 2</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">def</span><span style=\"color: #002339;\"> </span><span style=\"color: #08134A;\">__init__</span><span style=\"color: #002339;\">(</span><span style=\"color: #B1108E;\">self</span><span style=\"color: #002339;\">):</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 3</span><span style=\"color: #002339;\">        </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.env </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> MinimalEnv() </span><span style=\"color: #357B42;\"># 初始化 C++ 环境</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 4</span><span style=\"color: #002339;\">        </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.state </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">0</span><span style=\"color: #002339;\"> </span><span style=\"color: #357B42;\"># 初始化 Python 环境内部状态</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 5</span><span style=\"color: #002339;\">        </span><span style=\"color: #08134A;\">print</span><span style=\"color: #002339;\">(</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">Initialize MinimalEnv</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 6</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 7</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">def</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">step</span><span style=\"color: #002339;\">(</span><span style=\"color: #B1108E;\">self</span><span style=\"color: #002339;\">, </span><span style=\"color: #B1108E;\">action</span><span style=\"color: #002339;\">):</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 8</span><span style=\"color: #002339;\">        </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.state </span><span style=\"color: #7B30D0;\">+=</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">1</span><span style=\"color: #002339;\"> </span><span style=\"color: #357B42;\"># 在每一步中，Python 环境内部状态加 1</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"> 9</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">try</span><span style=\"color: #002339;\">:</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">10</span><span style=\"color: #002339;\">            input_dict </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> {</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">11</span><span style=\"color: #002339;\">                </span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">value</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">: action, </span><span style=\"color: #357B42;\"># 将 Python 环境接收到的整数转换为动作字典</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">12</span><span style=\"color: #002339;\">            }</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">13</span><span style=\"color: #002339;\">            result </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.env.step(input_dict) </span><span style=\"color: #357B42;\"># 调用 C++ 环境的 step 方法，并接收返回结果</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">14</span><span style=\"color: #002339;\">            result[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">py_state</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">] </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.state </span><span style=\"color: #357B42;\"># 将 Python 环境内部状态添加到返回结果中</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">15</span><span style=\"color: #002339;\">            </span><span style=\"color: #0991B6;\">return</span><span style=\"color: #002339;\"> result</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">16</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">except</span><span style=\"color: #002339;\"> </span><span style=\"color: #DC3EB7;\">ValueError</span><span style=\"color: #002339;\">:</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">17</span><span style=\"color: #002339;\">            </span><span style=\"color: #08134A;\">print</span><span style=\"color: #002339;\">(</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">input a valid integer</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">18</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">except</span><span style=\"color: #002339;\"> </span><span style=\"color: #DC3EB7;\">KeyboardInterrupt</span><span style=\"color: #002339;\">:</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">19</span><span style=\"color: #002339;\">            </span><span style=\"color: #08134A;\">print</span><span style=\"color: #002339;\">(</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #2970C7;\">\\n</span><span style=\"color: #A44185;\">quit</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">20</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">21</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">def</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">reset</span><span style=\"color: #002339;\">(</span><span style=\"color: #B1108E;\">self</span><span style=\"color: #002339;\">):</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">22</span><span style=\"color: #002339;\">        </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.state </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #174781;\">0</span><span style=\"color: #002339;\"> </span><span style=\"color: #357B42;\"># 重置 Python 环境内部状态</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">23</span><span style=\"color: #002339;\">        </span><span style=\"color: #08134A;\">print</span><span style=\"color: #002339;\">(</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">Reset MinimalEnv</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">)</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">24</span><span style=\"color: #002339;\">        result </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.env.reset() </span><span style=\"color: #357B42;\"># 调用 C++ 环境的 reset 方法，并接收返回结果</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">25</span><span style=\"color: #002339;\">        result[</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">py_state</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">] </span><span style=\"color: #7B30D0;\">=</span><span style=\"color: #002339;\"> </span><span style=\"color: #2F86D2;\">self</span><span style=\"color: #002339;\">.state </span><span style=\"color: #357B42;\"># 将 Python 环境内部状态添加到返回结果中</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">26</span><span style=\"color: #002339;\">        </span><span style=\"color: #0991B6;\">return</span><span style=\"color: #002339;\"> result</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">27</span>&nbsp;</div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">28</span><span style=\"color: #002339;\">    </span><span style=\"color: #0991B6;\">def</span><span style=\"color: #002339;\"> </span><span style=\"color: #B1108E;\">close</span><span style=\"color: #002339;\">(</span><span style=\"color: #B1108E;\">self</span><span style=\"color: #002339;\">):</span></div><div class='line'><span style=\"color:#2f86d2; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\">29</span><span style=\"color: #002339;\">        </span><span style=\"color: #08134A;\">print</span><span style=\"color: #002339;\">(</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #A44185;\">Close MinimalEnv</span><span style=\"color: #D86DB6;\">&quot;</span><span style=\"color: #002339;\">) </span><span style=\"color: #357B42;\"># 在有些情况下，可能需要在关闭环境时进行一些清理工作</span></div>","classes":"torchlight","styles":"background-color: #FFFFFF; --theme-selection-background: #4373c2;"}}
